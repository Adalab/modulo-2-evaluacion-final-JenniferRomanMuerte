let d=[];const b=()=>{fetch("https://fakestoreapi.com/products").then(e=>e.json()).then(e=>{d=e,console.log(d),_(d)}).catch(e=>{console.error(e)})};b();const a=document.querySelector(".js_productsList");let i=[];const E=e=>{const t=document.createElement("li");t.classList.add("articleList__list--li"),t.setAttribute("id",e.id);const c=document.createElement("div");c.classList.add("articleList__list--li--containerImg");const n=document.createElement("img");n.classList.add("articleList__list--li--containerImg--img"),e.image!=null?n.setAttribute("src",e.image):n.setAttribute("src","https://placehold.co/150x200"),c.appendChild(n);const s=document.createElement("h3");s.classList.add("articleList__list--li--title"),s.textContent=e.title;const r=document.createElement("span");return r.classList.add("articleList__list--li--span"),r.textContent=`${e.price} â‚¬`,t.appendChild(c),t.appendChild(s),t.appendChild(r),t},_=e=>{for(const c of e){const n=E(c),s=document.createElement("button");s.classList.add("articleList__list--li--btn","js_btnBuy"),s.textContent="Comprar",n.appendChild(s),a.appendChild(n)}const t=document.querySelectorAll(".js_btnBuy");for(const c of t)c.addEventListener("click",n=>S(n,e));if(i.length>0)for(const c of i)u(c.id,!0)},u=(e,t)=>{const c=a.querySelector(`[id="${e}"]`);if(!c)return;const n=c.querySelector(".js_btnBuy");t?(c.classList.add("isInCart"),n.textContent="Eliminar"):(c.classList.remove("isInCart"),n.textContent="Comprar")},S=(e,t)=>{p.classList.remove("hidden");const n=e.currentTarget.parentNode,s=n.id,r=t.find(o=>o.id===Number(s));if(r!=""){const o=i.findIndex(l=>l.id===r.id);o===-1?(r.quantity=1,i.push(r),u(n.id,!0)):(i.splice(o,1),u(n.id,!1))}C(i),L()},v=document.querySelector(".js_searchInput"),g=document.querySelector(".js_searchBtn"),q=e=>{const t=v.value,c=d.filter(n=>n.title.includes(t));a.innerHTML="",_(c),t===""&&(a.innerHTML="",_(d))};g.addEventListener("click",q);const p=document.querySelector(".articleCart"),m=document.querySelector(".js_cartList"),x=document.querySelector(".js_buttonDeleteAll"),C=e=>{m.innerHTML="";for(const s of e){const r=E(s),o=document.createElement("div");o.classList.add("articleList__list--li--div"),o.classList.add("js_divDelete"),o.textContent="X";const l=document.createElement("div");l.classList.add("articleList__list--li--divQuantity");const f=document.createElement("button");f.classList.add("articleList__list--li--divQuantity--btn","js_btnDec"),f.textContent="-";const y=document.createElement("span");y.classList.add("articleList__list--li--divQuantity--span"),y.textContent=s.quantity;const I=document.createElement("button");I.classList.add("articleList__list--li--divQuantity--btn","js_btnInc"),I.textContent="+",l.appendChild(f),l.appendChild(y),l.appendChild(I),r.appendChild(o),r.appendChild(l),m.appendChild(r)}const t=document.querySelectorAll(".js_divDelete");for(const s of t)s.addEventListener("click",A);const c=m.querySelectorAll(".js_btnDec");for(const s of c)s.addEventListener("click",j);const n=m.querySelectorAll(".js_btnInc");for(const s of n)s.addEventListener("click",k)},L=()=>{i.length===0?(localStorage.removeItem("productsInCart"),p.classList.add("hidden")):(localStorage.setItem("productsInCart",JSON.stringify(i)),p.classList.remove("hidden"))},h=e=>{const t=e.currentTarget.closest("li"),c=t.querySelector(".articleList__list--li--divQuantity--span");return{productInCart:i.find(s=>s.id===Number(t.id)),spanQuantity:c}},j=e=>{const{productInCart:t,spanQuantity:c}=h(e);if(t.quantity--,t.quantity===0){const n=i.findIndex(s=>s.id===t.id);n!==-1&&i.splice(n,1),C(i),L(),u(t.id,!1)}else c.textContent=t.quantity,localStorage.setItem("productsInCart",JSON.stringify(i))},k=e=>{const{productInCart:t,spanQuantity:c}=h(e);t.quantity++,c.textContent=t.quantity,localStorage.setItem("productsInCart",JSON.stringify(i))},A=e=>{const n=e.currentTarget.parentNode.id,s=i.find(r=>r.id===Number(n));if(s!=""){const r=i.findIndex(o=>o.id===s.id);r!==-1&&(i.splice(r,1),C(i),L(),u(n,!1))}},D=e=>{i=[],L();const t=a.querySelectorAll(".isInCart");for(const c of t){c.classList.remove("isInCart");const n=c.querySelector(".js_btnBuy");n&&(n.textContent="Comprar")}};x.addEventListener("click",D);localStorage.getItem("productsInCart")?(C(JSON.parse(localStorage.getItem("productsInCart"))),i=JSON.parse(localStorage.getItem("productsInCart"))):p.classList.add("hidden");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOltdLCJzb3VyY2VzQ29udGVudCI6W10sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIifQ==
