let p=[];const q=()=>{fetch("https://fakestoreapi.com/products").then(e=>e.json()).then(e=>{p=e,_(p)}).catch(e=>{console.error(e)})};q();const u=document.querySelector(".js_productsList"),h=document.querySelector(".js_containerMessage"),x=document.querySelector(".js_resetMessage");let i=[];const b=e=>{const t=document.createElement("li");t.classList.add("articleList__list--li"),t.setAttribute("id",e.id);const n=document.createElement("div");n.classList.add("articleList__list--li--containerImg");const s=document.createElement("img");s.classList.add("articleList__list--li--containerImg--img"),e.image!=null?s.setAttribute("src",e.image):s.setAttribute("src","https://placehold.co/150x200"),n.appendChild(s);const c=document.createElement("h3");c.classList.add("articleList__list--li--title"),c.textContent=e.title;const r=document.createElement("span");return r.classList.add("articleList__list--li--span"),r.textContent=`${e.price} â‚¬`,t.appendChild(n),t.appendChild(c),t.appendChild(r),t},_=e=>{for(const n of e){const s=b(n),c=document.createElement("button");c.classList.add("articleList__list--li--btn","js_btnBuy"),c.textContent="Comprar",s.appendChild(c),u.appendChild(s)}const t=document.querySelectorAll(".js_btnBuy");for(const n of t)n.addEventListener("click",s=>j(s,e));if(i.length>0)for(const n of i)m(n.id,!0);l()},m=(e,t)=>{const n=u.querySelector(`[id="${e}"]`);if(!n)return;const s=n.querySelector(".js_btnBuy");t?(n.classList.add("isInCart"),s.textContent="Eliminar"):(n.classList.remove("isInCart"),s.textContent="Comprar")},j=(e,t)=>{const s=e.currentTarget.parentNode,c=s.id,r=t.find(o=>o.id===Number(c));if(r!=""){const o=i.findIndex(d=>d.id===r.id);o===-1?(r.quantity=1,i.push(r),m(s.id,!0)):(i.splice(o,1),m(s.id,!1))}C(i),l()},v=e=>{h.classList.add("hidden"),_(p),S.value="",l()};x.addEventListener("click",v);const S=document.querySelector(".js_searchInput"),k=document.querySelector(".js_searchBtn"),A=e=>{const t=S.value.trim().toLowerCase(),n=p.filter(s=>s.title.toLowerCase().includes(t));if(n.length===0){h.classList.remove("hidden"),u.innerHTML="";return}else u.innerHTML="",_(n);t===""&&v()};k.addEventListener("click",A);const E=document.querySelector(".articleCart"),a=document.querySelector(".js_cartList"),D=document.querySelector(".js_buttonDeleteAll"),I=document.querySelector(".main"),C=e=>{a.innerHTML="";for(const c of e){const r=b(c),o=document.createElement("div");o.classList.add("articleList__list--li--div"),o.classList.add("js_divDelete"),o.textContent="X";const d=document.createElement("div");d.classList.add("articleList__list--li--divQuantity");const L=document.createElement("button");L.classList.add("articleList__list--li--divQuantity--btn","js_btnDec"),L.textContent="-";const f=document.createElement("span");f.classList.add("articleList__list--li--divQuantity--span"),f.textContent=c.quantity;const y=document.createElement("button");y.classList.add("articleList__list--li--divQuantity--btn","js_btnInc"),y.textContent="+",d.appendChild(L),d.appendChild(f),d.appendChild(y),r.appendChild(o),r.appendChild(d),a.appendChild(r)}const t=a.querySelectorAll(".js_divDelete");for(const c of t)c.addEventListener("click",M);const n=a.querySelectorAll(".js_btnDec");for(const c of n)c.addEventListener("click",P);const s=a.querySelectorAll(".js_btnInc");for(const c of s)c.addEventListener("click",Q)},l=()=>{i.length===0?(localStorage.removeItem("productsInCart"),E.classList.add("hidden"),I.classList.add("noCart")):(localStorage.setItem("productsInCart",JSON.stringify(i)),E.classList.remove("hidden"),I.classList.remove("noCart"))},g=e=>{const t=e.currentTarget.closest("li"),n=t.querySelector(".articleList__list--li--divQuantity--span");return{productInCart:i.find(c=>c.id===Number(t.id)),spanQuantity:n}},P=e=>{const{productInCart:t,spanQuantity:n}=g(e);if(t.quantity--,t.quantity===0){const s=i.findIndex(c=>c.id===t.id);s!==-1&&i.splice(s,1),C(i),l(),m(t.id,!1)}else n.textContent=t.quantity,l()},Q=e=>{const{productInCart:t,spanQuantity:n}=g(e);t.quantity++,n.textContent=t.quantity,l()},M=e=>{const s=e.currentTarget.parentNode.id,c=i.find(r=>r.id===Number(s));if(c){const r=i.findIndex(o=>o.id===c.id);r!==-1&&(i.splice(r,1),C(i),l(),m(s,!1))}},N=e=>{i=[],a.innerHTML="",l();const t=u.querySelectorAll(".isInCart");for(const n of t){n.classList.remove("isInCart");const s=n.querySelector(".js_btnBuy");s&&(s.textContent="Comprar")}};D.addEventListener("click",N);localStorage.getItem("productsInCart")?(i=JSON.parse(localStorage.getItem("productsInCart")),C(JSON.parse(localStorage.getItem("productsInCart"))),l()):(i=[],l());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOltdLCJzb3VyY2VzQ29udGVudCI6W10sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIifQ==
